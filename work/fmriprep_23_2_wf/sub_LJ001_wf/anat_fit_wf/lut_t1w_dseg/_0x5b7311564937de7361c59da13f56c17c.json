[
    [
        "function_str",
        "def apply_lut(in_dseg, lut, newpath=None):\n    \"\"\"Map the input discrete segmentation to a new label set (lookup table, LUT).\"\"\"\n    import numpy as np\n    import nibabel as nb\n    from nipype.utils.filemanip import fname_presuffix\n\n    if newpath is None:\n        from os import getcwd\n\n        newpath = getcwd()\n\n    out_file = fname_presuffix(in_dseg, suffix=\"_dseg\", newpath=newpath)\n    lut = np.array(lut, dtype=\"int16\")\n\n    segm = nb.load(in_dseg)\n    hdr = segm.header.copy()\n    hdr.set_data_dtype(\"int16\")\n    segm.__class__(\n        lut[np.asanyarray(segm.dataobj, dtype=int)].astype(\"int16\"), segm.affine, hdr\n    ).to_filename(out_file)\n\n    return out_file\n"
    ],
    [
        "in_dseg",
        [
            "/tmp/work/fmriprep_23_2_wf/sub_LJ001_wf/anat_fit_wf/fast/sub-LJ001_ses-LJ001MR1_acq-mprage_T1w_noise_corrected_corrected_xform_masked_pveseg.nii.gz",
            "f6d95aa3d4c11e62eac7f330e20a007c"
        ]
    ],
    [
        "lut",
        [
            0,
            3,
            1,
            2
        ]
    ],
    [
        "needed_outputs",
        [
            "out"
        ]
    ]
]